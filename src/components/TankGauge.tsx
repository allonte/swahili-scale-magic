import React from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Slider } from '@/components/ui/slider';

// Height to capacity mapping based on tank measurements
// Heights in MM mapped to capacities in L
const heightCapacityData: { [key: number]: number } = {
  0: 202, 1: 214, 2: 226, 3: 237, 4: 249, 5: 261, 6: 273, 7: 285, 8: 296, 9: 308,
  10: 319, 11: 331, 12: 343, 13: 354, 14: 366, 15: 378, 16: 390, 17: 402, 18: 413, 19: 425,
  20: 437, 21: 449, 22: 461, 23: 472, 24: 484, 25: 496, 26: 508, 27: 520, 28: 531, 29: 543,
  30: 555, 31: 567, 32: 579, 33: 590, 34: 602, 35: 614, 36: 626, 37: 638, 38: 649, 39: 661,
  40: 672, 41: 684, 42: 696, 43: 707, 44: 719, 45: 731, 46: 743, 47: 755, 48: 766, 49: 778,
  50: 790, 51: 802, 52: 814, 53: 825, 54: 837, 55: 849, 56: 861, 57: 873, 58: 884, 59: 896,
  60: 907, 61: 919, 62: 931, 63: 942, 64: 954, 65: 966, 66: 978, 67: 990, 68: 1001, 69: 1013,
  70: 1025, 71: 1037, 72: 1049, 73: 1060, 74: 1072, 75: 1084, 76: 1096, 77: 1108, 78: 1119, 79: 1131,
  80: 1142, 81: 1154, 82: 1166, 83: 1177, 84: 1189, 85: 1201, 86: 1213, 87: 1225, 88: 1236, 89: 1248,
  90: 1260, 91: 1272, 92: 1284, 93: 1295, 94: 1307, 95: 1319, 96: 1331, 97: 1343, 98: 1354, 99: 1366,
  100: 1378, 101: 1397, 102: 1416, 103: 1434, 104: 1453, 105: 1472, 106: 1491, 107: 1510, 108: 1528, 109: 1547,
  110: 1565, 111: 1584, 112: 1603, 113: 1621, 114: 1640, 115: 1659, 116: 1678, 117: 1697, 118: 1715, 119: 1734,
  120: 1753, 121: 1772, 122: 1791, 123: 1809, 124: 1828, 125: 1847, 126: 1866, 127: 1885, 128: 1903, 129: 1922,
  130: 1940, 131: 1959, 132: 1978, 133: 1996, 134: 2015, 135: 2034, 136: 2053, 137: 2072, 138: 2090, 139: 2109,
  140: 2128, 141: 2147, 142: 2166, 143: 2184, 144: 2203, 145: 2222, 146: 2241, 147: 2260, 148: 2278, 149: 2297,
  150: 2315, 151: 2334, 152: 2353, 153: 2371, 154: 2390, 155: 2409, 156: 2428, 157: 2447, 158: 2465, 159: 2484,
  160: 2503, 161: 2522, 162: 2541, 163: 2559, 164: 2578, 165: 2597, 166: 2616, 167: 2635, 168: 2653, 169: 2672,
  170: 2691, 171: 2710, 172: 2729, 173: 2747, 174: 2766, 175: 2785, 176: 2804, 177: 2823, 178: 2841, 179: 2860,
  180: 2878, 181: 2897, 182: 2916, 183: 2934, 184: 2953, 185: 2972, 186: 2991, 187: 3010, 188: 3028, 189: 3047,
  190: 3066, 191: 3085, 192: 3104, 193: 3122, 194: 3141, 195: 3160, 196: 3179, 197: 3198, 198: 3216, 199: 3235,
  200: 3253, 201: 3277, 202: 3300, 203: 3324, 204: 3347, 205: 3371, 206: 3395, 207: 3418, 208: 3442, 209: 3465,
  210: 3489, 211: 3513, 212: 3536, 213: 3560, 214: 3583, 215: 3607, 216: 3631, 217: 3654, 218: 3678, 219: 3701,
  220: 3725, 221: 3749, 222: 3772, 223: 3796, 224: 3819, 225: 3843, 226: 3867, 227: 3890, 228: 3914, 229: 3937,
  230: 3960, 231: 3984, 232: 4007, 233: 4031, 234: 4054, 235: 4078, 236: 4102, 237: 4125, 238: 4149, 239: 4172,
  240: 4196, 241: 4220, 242: 4243, 243: 4267, 244: 4290, 245: 4314, 246: 4338, 247: 4361, 248: 4385, 249: 4408,
  250: 4432, 251: 4456, 252: 4479, 253: 4503, 254: 4526, 255: 4550, 256: 4574, 257: 4597, 258: 4621, 259: 4644,
  260: 4667, 261: 4691, 262: 4714, 263: 4738, 264: 4761, 265: 4785, 266: 4809, 267: 4832, 268: 4856, 269: 4879,
  270: 4903, 271: 4927, 272: 4950, 273: 4974, 274: 4997, 275: 5021, 276: 5045, 277: 5068, 278: 5092, 279: 5115,
  280: 5138, 281: 5162, 282: 5185, 283: 5209, 284: 5232, 285: 5256, 286: 5280, 287: 5303, 288: 5327, 289: 5350,
  290: 5374, 291: 5398, 292: 5421, 293: 5445, 294: 5468, 295: 5492, 296: 5516, 297: 5539, 298: 5563, 299: 5586,
  300: 5610, 301: 5637, 302: 5665, 303: 5692, 304: 5720, 305: 5747, 306: 5774, 307: 5802, 308: 5829, 309: 5857,
  310: 5883, 311: 5910, 312: 5938, 313: 5965, 314: 5993, 315: 6020, 316: 6047, 317: 6075, 318: 6102, 319: 6130,
  320: 6157, 321: 6184, 322: 6212, 323: 6239, 324: 6267, 325: 6294, 326: 6321, 327: 6349, 328: 6376, 329: 6404,
  330: 6431, 331: 6458, 332: 6486, 333: 6513, 334: 6541, 335: 6568, 336: 6595, 337: 6623, 338: 6650, 339: 6678,
  340: 6704, 341: 6731, 342: 6759, 343: 6786, 344: 6814, 345: 6841, 346: 6868, 347: 6896, 348: 6923, 349: 6951,
  350: 6978, 351: 7005, 352: 7033, 353: 7060, 354: 7088, 355: 7115, 356: 7142, 357: 7170, 358: 7197, 359: 7225,
  360: 7251, 361: 7278, 362: 7306, 363: 7333, 364: 7361, 365: 7388, 366: 7415, 367: 7443, 368: 7470, 369: 7498,
  370: 7525, 371: 7552, 372: 7580, 373: 7607, 374: 7635, 375: 7662, 376: 7689, 377: 7717, 378: 7744, 379: 7772,
  380: 7799, 381: 7826, 382: 7854, 383: 7881, 384: 7909, 385: 7936, 386: 7963, 387: 7991, 388: 8018, 389: 8046,
  390: 8072, 391: 8099, 392: 8127, 393: 8154, 394: 8182, 395: 8209, 396: 8236, 397: 8264, 398: 8291, 399: 8319,
  400: 8346, 401: 8377, 402: 8407, 403: 8438, 404: 8468, 405: 8499, 406: 8529, 407: 8560, 408: 8590, 409: 8621,
  410: 8651, 411: 8682, 412: 8712, 413: 8743, 414: 8773, 415: 8804, 416: 8834, 417: 8865, 418: 8895, 419: 8926,
  420: 8955, 421: 8986, 422: 9016, 423: 9047, 424: 9077, 425: 9108, 426: 9138, 427: 9169, 428: 9199, 429: 9230,
  430: 9260, 431: 9291, 432: 9321, 433: 9352, 434: 9382, 435: 9413, 436: 9443, 437: 9474, 438: 9504, 439: 9535,
  440: 9565, 441: 9596, 442: 9626, 443: 9657, 444: 9687, 445: 9718, 446: 9748, 447: 9779, 448: 9809, 449: 9840,
  450: 9870, 451: 9901, 452: 9931, 453: 9962, 454: 9992, 455: 10023, 456: 10053, 457: 10084, 458: 10114, 459: 10145,
  460: 10174, 461: 10205, 462: 10235, 463: 10266, 464: 10296, 465: 10327, 466: 10357, 467: 10388, 468: 10418, 469: 10449,
  470: 10479, 471: 10510, 472: 10540, 473: 10571, 474: 10601, 475: 10632, 476: 10662, 477: 10693, 478: 10723, 479: 10754,
  480: 10784, 481: 10815, 482: 10845, 483: 10876, 484: 10906, 485: 10937, 486: 10967, 487: 10998, 488: 11028, 489: 11059,
  490: 11089, 491: 11120, 492: 11150, 493: 11181, 494: 11211, 495: 11242, 496: 11272, 497: 11303, 498: 11333, 499: 11364,
  500: 11394, 501: 11427, 502: 11460, 503: 11493, 504: 11526, 505: 11560, 506: 11593, 507: 11626, 508: 11659, 509: 11692,
  510: 11725, 511: 11758, 512: 11791, 513: 11824, 514: 11857, 515: 11891, 516: 11924, 517: 11957, 518: 11990, 519: 12023,
  520: 12056, 521: 12089, 522: 12122, 523: 12155, 524: 12188, 525: 12222, 526: 12255, 527: 12288, 528: 12321, 529: 12354,
  530: 12387, 531: 12420, 532: 12453, 533: 12486, 534: 12519, 535: 12553, 536: 12586, 537: 12619, 538: 12652, 539: 12685,
  540: 12718, 541: 12751, 542: 12784, 543: 12817, 544: 12850, 545: 12884, 546: 12917, 547: 12950, 548: 12983, 549: 13016,
  550: 13049, 551: 13082, 552: 13115, 553: 13148, 554: 13181, 555: 13215, 556: 13248, 557: 13281, 558: 13314, 559: 13347,
  560: 13380, 561: 13413, 562: 13446, 563: 13479, 564: 13512, 565: 13546, 566: 13579, 567: 13612, 568: 13645, 569: 13678,
  570: 13711, 571: 13744, 572: 13777, 573: 13810, 574: 13843, 575: 13877, 576: 13910, 577: 13943, 578: 13976, 579: 14009,
  580: 14042, 581: 14075, 582: 14108, 583: 14141, 584: 14174, 585: 14208, 586: 14241, 587: 14274, 588: 14307, 589: 14340,
  590: 14373, 591: 14406, 592: 14439, 593: 14472, 594: 14505, 595: 14539, 596: 14572, 597: 14605, 598: 14638, 599: 14671,
  600: 14704, 601: 14739, 602: 14775, 603: 14810, 604: 14845, 605: 14881, 606: 14916, 607: 14951, 608: 14986, 609: 15022,
  610: 15057, 611: 15092, 612: 15128, 613: 15163, 614: 15198, 615: 15234, 616: 15269, 617: 15304, 618: 15339, 619: 15375,
  620: 15410, 621: 15445, 622: 15481, 623: 15516, 624: 15551, 625: 15587, 626: 15622, 627: 15657, 628: 15692, 629: 15728,
  630: 15763, 631: 15798, 632: 15834, 633: 15869, 634: 15904, 635: 15940, 636: 15975, 637: 16010, 638: 16045, 639: 16081,
  640: 16116, 641: 16151, 642: 16187, 643: 16222, 644: 16257, 645: 16293, 646: 16328, 647: 16363, 648: 16398, 649: 16434,
  650: 16469, 651: 16504, 652: 16540, 653: 16575, 654: 16610, 655: 16646, 656: 16681, 657: 16716, 658: 16751, 659: 16787,
  660: 16822, 661: 16857, 662: 16893, 663: 16928, 664: 16963, 665: 16999, 666: 17034, 667: 17069, 668: 17104, 669: 17140,
  670: 17176, 671: 17211, 672: 17247, 673: 17282, 674: 17317, 675: 17353, 676: 17388, 677: 17423, 678: 17458, 679: 17494,
  680: 17529, 681: 17564, 682: 17600, 683: 17635, 684: 17670, 685: 17706, 686: 17741, 687: 17776, 688: 17811, 689: 17847,
  690: 17882, 691: 17917, 692: 17953, 693: 17988, 694: 18023, 695: 18059, 696: 18094, 697: 18129, 698: 18164, 699: 18200,
  700: 18235, 701: 18272, 702: 18309, 703: 18347, 704: 18384, 705: 18421, 706: 18458, 707: 18495, 708: 18533, 709: 18570,
  710: 18607, 711: 18644, 712: 18681, 713: 18719, 714: 18756, 715: 18793, 716: 18830, 717: 18867, 718: 18905, 719: 18942,
  720: 18979, 721: 19016, 722: 19053, 723: 19091, 724: 19128, 725: 19165, 726: 19202, 727: 19239, 728: 19277, 729: 19314,
  730: 19351, 731: 19388, 732: 19425, 733: 19463, 734: 19500, 735: 19537, 736: 19574, 737: 19611, 738: 19649, 739: 19686,
  740: 19722, 741: 19759, 742: 19796, 743: 19834, 744: 19871, 745: 19908, 746: 19945, 747: 19982, 748: 20020, 749: 20057,
  750: 20094, 751: 20131, 752: 20168, 753: 20206, 754: 20243, 755: 20280, 756: 20317, 757: 20354, 758: 20392, 759: 20429,
  760: 20466, 761: 20503, 762: 20540, 763: 20578, 764: 20615, 765: 20652, 766: 20689, 767: 20726, 768: 20764, 769: 20801,
  770: 20838, 771: 20875, 772: 20912, 773: 20950, 774: 20987, 775: 21024, 776: 21061, 777: 21098, 778: 21136, 779: 21173,
  780: 21210, 781: 21247, 782: 21284, 783: 21322, 784: 21359, 785: 21396, 786: 21433, 787: 21470, 788: 21508, 789: 21545,
  790: 21582, 791: 21619, 792: 21656, 793: 21694, 794: 21731, 795: 21768, 796: 21805, 797: 21842, 798: 21880, 799: 21917,
  800: 21953, 801: 21992, 802: 22031, 803: 22069, 804: 22108, 805: 22147, 806: 22186, 807: 22225, 808: 22263, 809: 22302,
  810: 22341, 811: 22380, 812: 22419, 813: 22457, 814: 22496, 815: 22535, 816: 22574, 817: 22613, 818: 22651, 819: 22690,
  820: 22729, 821: 22768, 822: 22807, 823: 22845, 824: 22884, 825: 22923, 826: 22962, 827: 23001, 828: 23039, 829: 23078,
  830: 23116, 831: 23155, 832: 23194, 833: 23232, 834: 23271, 835: 23310, 836: 23349, 837: 23388, 838: 23426, 839: 23465,
  840: 23504, 841: 23543, 842: 23582, 843: 23620, 844: 23659, 845: 23698, 846: 23737, 847: 23776, 848: 23814, 849: 23853,
  850: 23891, 851: 23930, 852: 23969, 853: 24007, 854: 24046, 855: 24085, 856: 24124, 857: 24163, 858: 24201, 859: 24240,
  860: 24279, 861: 24318, 862: 24357, 863: 24395, 864: 24434, 865: 24473, 866: 24512, 867: 24551, 868: 24589, 869: 24628,
  870: 24666, 871: 24705, 872: 24744, 873: 24782, 874: 24821, 875: 24860, 876: 24899, 877: 24938, 878: 24976, 879: 25015,
  880: 25054, 881: 25093, 882: 25132, 883: 25170, 884: 25209, 885: 25248, 886: 25287, 887: 25326, 888: 25364, 889: 25403,
  890: 25441, 891: 25480, 892: 25519, 893: 25557, 894: 25596, 895: 25635, 896: 25674, 897: 25713, 898: 25751, 899: 25790,
  900: 25829, 901: 25869, 902: 25909, 903: 25949, 904: 25989, 905: 26030, 906: 26070, 907: 26110, 908: 26150, 909: 26190,
  910: 26230, 911: 26270, 912: 26310, 913: 26350, 914: 26390, 915: 26431, 916: 26471, 917: 26511, 918: 26551, 919: 26591,
  920: 26630, 921: 26670, 922: 26710, 923: 26750, 924: 26790, 925: 26831, 926: 26871, 927: 26911, 928: 26951, 929: 26991,
  930: 27031, 931: 27071, 932: 27111, 933: 27151, 934: 27191, 935: 27232, 936: 27272, 937: 27312, 938: 27352, 939: 27392,
  940: 27431, 941: 27471, 942: 27511, 943: 27551, 944: 27591, 945: 27632, 946: 27672, 947: 27712, 948: 27752, 949: 27792,
  950: 27832, 951: 27872, 952: 27912, 953: 27952, 954: 27992, 955: 28033, 956: 28073, 957: 28113, 958: 28153, 959: 28193,
  960: 28232, 961: 28272, 962: 28312, 963: 28352, 964: 28392, 965: 28433, 966: 28473, 967: 28513, 968: 28553, 969: 28593,
  970: 28633, 971: 28673, 972: 28713, 973: 28753, 974: 28793, 975: 28834, 976: 28874, 977: 28914, 978: 28954, 979: 28994,
  980: 29033, 981: 29073, 982: 29113, 983: 29153, 984: 29193, 985: 29234, 986: 29274, 987: 29314, 988: 29354, 989: 29394,
  990: 29434, 991: 29474, 992: 29514, 993: 29554, 994: 29594, 995: 29635, 996: 29675, 997: 29715, 998: 29755, 999: 29795,
  1000: 29834, 1001: 29875, 1002: 29916, 1003: 29957, 1004: 29998, 1005: 30040, 1006: 30081, 1007: 30122, 1008: 30163, 1009: 30204,
  1010: 30245, 1011: 30286, 1012: 30327, 1013: 30368, 1014: 30409, 1015: 30451, 1016: 30492, 1017: 30533, 1018: 30574, 1019: 30615,
  1020: 30656, 1021: 30697, 1022: 30738, 1023: 30779, 1024: 30820, 1025: 30862, 1026: 30903, 1027: 30944, 1028: 30985, 1029: 31026,
  1030: 31067, 1031: 31108, 1032: 31149, 1033: 31190, 1034: 31231, 1035: 31273, 1036: 31314, 1037: 31355, 1038: 31396, 1039: 31437,
  1040: 31478, 1041: 31519, 1042: 31560, 1043: 31601, 1044: 31642, 1045: 31684, 1046: 31725, 1047: 31766, 1048: 31807, 1049: 31848,
  1050: 31889, 1051: 31930, 1052: 31971, 1053: 32012, 1054: 32053, 1055: 32095, 1056: 32136, 1057: 32177, 1058: 32218, 1059: 32259,
  1060: 32300, 1061: 32341, 1062: 32382, 1063: 32423, 1064: 32464, 1065: 32506, 1066: 32547, 1067: 32588, 1068: 32629, 1069: 32670,
  1070: 32711, 1071: 32752, 1072: 32793, 1073: 32834, 1074: 32875, 1075: 32917, 1076: 32958, 1077: 32999, 1078: 33040, 1079: 33081,
  1080: 33122, 1081: 33163, 1082: 33204, 1083: 33245, 1084: 33286, 1085: 33328, 1086: 33369, 1087: 33410, 1088: 33451, 1089: 33492,
  1090: 33533, 1091: 33574, 1092: 33615, 1093: 33656, 1094: 33697, 1095: 33739, 1096: 33780, 1097: 33821, 1098: 33862, 1099: 33903,
  1100: 33944, 1101: 33986, 1102: 34028, 1103: 34070, 1104: 34112, 1105: 34154, 1106: 34195, 1107: 34237, 1108: 34279, 1109: 34321,
  1110: 34364, 1111: 34406, 1112: 34448, 1113: 34490, 1114: 34532, 1115: 34574, 1116: 34615, 1117: 34657, 1118: 34699, 1119: 34741,
  1120: 34783, 1121: 34825, 1122: 34867, 1123: 34909, 1124: 34951, 1125: 34993, 1126: 35034, 1127: 35076, 1128: 35118, 1129: 35160,
  1130: 35202, 1131: 35244, 1132: 35286, 1133: 35328, 1134: 35370, 1135: 35412, 1136: 35453, 1137: 35495, 1138: 35537, 1139: 35579,
  1140: 35621, 1141: 35663, 1142: 35705, 1143: 35747, 1144: 35789, 1145: 35831, 1146: 35872, 1147: 35914, 1148: 35956, 1149: 35998,
  1150: 36041, 1151: 36083, 1152: 36125, 1153: 36167, 1154: 36209, 1155: 36251, 1156: 36292, 1157: 36334, 1158: 36376, 1159: 36418,
  1160: 36460, 1161: 36502, 1162: 36544, 1163: 36586, 1164: 36628, 1165: 36670, 1166: 36711, 1167: 36753, 1168: 36795, 1169: 36837,
  1170: 36879, 1171: 36921, 1172: 36963, 1173: 37005, 1174: 37047, 1175: 37089, 1176: 37130, 1177: 37172, 1178: 37214, 1179: 37256,
  1180: 37298, 1181: 37340, 1182: 37382, 1183: 37424, 1184: 37466, 1185: 37508, 1186: 37549, 1187: 37591, 1188: 37633, 1189: 37675,
  1190: 37717, 1191: 37759, 1192: 37801, 1193: 37843, 1194: 37885, 1195: 37927, 1196: 37968, 1197: 38010, 1198: 38052, 1199: 38094,
  1200: 38137, 1201: 38180, 1202: 38222, 1203: 38265, 1204: 38307, 1205: 38350, 1206: 38392, 1207: 38435, 1208: 38477, 1209: 38520,
  1210: 38562, 1211: 38605, 1212: 38647, 1213: 38690, 1214: 38732, 1215: 38775, 1216: 38817, 1217: 38860, 1218: 38902, 1219: 38945,
  1220: 38987, 1221: 39030, 1222: 39072, 1223: 39115, 1224: 39157, 1225: 39200, 1226: 39242, 1227: 39285, 1228: 39327, 1229: 39370,
  1230: 39412, 1231: 39455, 1232: 39497, 1233: 39540, 1234: 39582, 1235: 39625, 1236: 39667, 1237: 39710, 1238: 39752, 1239: 39795,
  1240: 39837, 1241: 39880, 1242: 39922, 1243: 39965, 1244: 40007, 1245: 40050, 1246: 40092, 1247: 40135, 1248: 40177, 1249: 40220,
  1250: 40263, 1251: 40306, 1252: 40348, 1253: 40391, 1254: 40433, 1255: 40476, 1256: 40518, 1257: 40561, 1258: 40603, 1259: 40646,
  1260: 40688, 1261: 40731, 1262: 40773, 1263: 40816, 1264: 40858, 1265: 40901, 1266: 40943, 1267: 40986, 1268: 41028, 1269: 41071,
  1270: 41113, 1271: 41156, 1272: 41198, 1273: 41241, 1274: 41283, 1275: 41326, 1276: 41368, 1277: 41411, 1278: 41453, 1279: 41496,
  1280: 41538, 1281: 41581, 1282: 41623, 1283: 41666, 1284: 41708, 1285: 41751, 1286: 41793, 1287: 41836, 1288: 41878, 1289: 41921,
  1290: 41963, 1291: 42006, 1292: 42048, 1293: 42091, 1294: 42133, 1295: 42176, 1296: 42218, 1297: 42261, 1298: 42303, 1299: 42346,
  1300: 42389, 1301: 42432, 1302: 42475, 1303: 42518, 1304: 42561, 1305: 42604, 1306: 42646, 1307: 42689, 1308: 42732, 1309: 42775,
  1310: 42818, 1311: 42861, 1312: 42904, 1313: 42947, 1314: 42990, 1315: 43033, 1316: 43075, 1317: 43118, 1318: 43161, 1319: 43204,
  1320: 43246, 1321: 43289, 1322: 43332, 1323: 43375, 1324: 43418, 1325: 43461, 1326: 43503, 1327: 43546, 1328: 43589, 1329: 43632,
  1330: 43675, 1331: 43718, 1332: 43761, 1333: 43804, 1334: 43847, 1335: 43890, 1336: 43932, 1337: 43975, 1338: 44018, 1339: 44061,
  1340: 44104, 1341: 44147, 1342: 44190, 1343: 44233, 1344: 44276, 1345: 44319, 1346: 44361, 1347: 44404, 1348: 44447, 1349: 44490,
  1350: 44533, 1351: 44576, 1352: 44619, 1353: 44662, 1354: 44705, 1355: 44748, 1356: 44790, 1357: 44833, 1358: 44876, 1359: 44919,
  1360: 44962, 1361: 45005, 1362: 45048, 1363: 45091, 1364: 45134, 1365: 45177, 1366: 45219, 1367: 45262, 1368: 45305, 1369: 45348,
  1370: 45391, 1371: 45434, 1372: 45477, 1373: 45520, 1374: 45563, 1375: 45606, 1376: 45648, 1377: 45691, 1378: 45734, 1379: 45777
};

// Convert height percentage (0-100) to millimeters and get capacity
function getCapacityFromPercentage(percentage: number): number {
  // Convert percentage to height in millimeters (0% = 0mm, 100% = 1379mm)
  const heightMM = Math.round((percentage / 100) * 1379);
  return heightCapacityData[heightMM] || 202;
}

interface TankGaugeProps {
  heightPercentage: number;
  onHeightChange: (height: number) => void;
  onCapacityChange: (capacity: number) => void;
}

const TankGauge: React.FC<TankGaugeProps> = ({ heightPercentage, onHeightChange, onCapacityChange }) => {
  const capacity = getCapacityFromPercentage(heightPercentage);
  
  const handleSliderChange = (values: number[]) => {
    const newHeight = values[0];
    const newCapacity = getCapacityFromPercentage(newHeight);
    onHeightChange(newHeight);
    onCapacityChange(newCapacity);
  };

  return (
    <Card className="w-full">
      <CardHeader>
        <CardTitle className="text-center">Tank Level Gauge</CardTitle>
      </CardHeader>
      <CardContent className="space-y-6">
        {/* Visual Tank Gauge */}
        <div className="flex justify-center">
          <div className="relative">
            {/* Tank Outline */}
            <div className="w-32 h-64 border-4 border-primary rounded-lg bg-secondary/20 relative overflow-hidden">
              {/* Liquid Level */}
              <div 
                className="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-primary to-primary/70 transition-all duration-300 ease-out"
                style={{ height: `${heightPercentage}%` }}
              />
              {/* Percentage Labels */}
              <div className="absolute inset-0 flex flex-col justify-between py-2 px-1">
                <div className="text-xs font-bold text-foreground/70">100%</div>
                <div className="text-xs font-bold text-foreground/70">50%</div>
                <div className="text-xs font-bold text-foreground/70">0%</div>
              </div>
            </div>
            
            {/* Current Level Indicator */}
            <div 
              className="absolute right-0 w-6 h-1 bg-accent border border-accent-foreground rounded-r transform -translate-y-1/2 transition-all duration-300"
              style={{ bottom: `${heightPercentage}%` }}
            >
              <div className="absolute left-6 top-1/2 transform -translate-y-1/2 bg-background border border-accent-foreground rounded px-2 py-1 text-xs font-bold whitespace-nowrap">
                {heightPercentage}%
              </div>
            </div>
          </div>
        </div>

        {/* Slider Control */}
        <div className="space-y-4">
          <div className="text-center">
            <label className="text-sm font-medium text-foreground/70">
              Height Percentage
            </label>
          </div>
          <Slider
            value={[heightPercentage]}
            onValueChange={handleSliderChange}
            max={100}
            min={0}
            step={1}
            className="w-full"
          />
        </div>

        {/* Display Values */}
        <div className="grid grid-cols-2 gap-4">
          <div className="text-center p-4 bg-secondary/20 rounded-lg border">
            <div className="text-2xl font-bold text-primary">{heightPercentage}%</div>
            <div className="text-sm text-muted-foreground">Height</div>
          </div>
          <div className="text-center p-4 bg-secondary/20 rounded-lg border">
            <div className="text-2xl font-bold text-primary">{capacity.toLocaleString()}</div>
            <div className="text-sm text-muted-foreground">Capacity (L)</div>
          </div>
        </div>
      </CardContent>
    </Card>
  );
};

export default TankGauge;